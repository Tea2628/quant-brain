# 规格-页面与交互流程（v0.1 草案）

> 目标：定义导航结构与关键路径“查看→提案→审批→干跑”的页面与交互，确保全中文、科技感、A11y 与性能基线【1】。

## 1. 信息架构（IA）
- 顶级导航：仪表盘｜交易面板｜策略与参数｜GPT 助手｜回测与超参｜数据与对接｜系统与审计｜设置
- 面包屑：`首页 / 模块 / 子页`
- 搜索：全局命令面板（Ctrl/⌘+K）可查找页面与对象（Bot/Trade/Proposal）

## 2. 页面说明（最小必备）
### 2.1 仪表盘
- 卡片：收益/回撤、风险阈值状态、系统健康、最近告警
- 图表：收益曲线、回撤、运行时错误趋势
- 交互：时间区间切换、深/浅色切换

### 2.2 交易面板（只读数据）
- 表格：持仓/挂单/历史（虚拟滚动、列配置、导出）
- 图表：K 线 + 指标层；信号/强平线标注
- 交互：缩放/平移/十字光标；分辨率切换

### 2.3 GPT 助手（提案→审批→执行·干跑优先）
- 左侧：聊天输入与上下文提示
- 右侧：**提案卡片**（展示结构化 Proposal，仅此；禁止自然语“下单”）
- 按钮：`提交审批`（进入审批流）；`干跑执行`（仅在审批通过后可见）
- 缺口清单：当字段不完整时，显示“缺口清单”并高亮缺失项

### 2.4 审批对话框
- 步骤模式：干跑 2 步（dry‑1/dry‑2），实盘 3 步（live‑1/2/3）
- 字段：决策（通过/拒绝）、理由（必填）、审计确认
- 审批通过后：在时间线追加 `approval.granted` 事件

### 2.5 系统与审计
- 时间线：提案→审批→执行→回执
- 回放：基于 TraceID 重放 UI 状态
- 导出：CSV/JSON，带过滤条件

## 3. 关键路径（必须全通）
1) 查看：仪表盘/交易面板只读  
2) 生成提案：GPT 助手产 **结构化 Proposal**（或缺口清单）  
3) 审批：对话框完成干跑 2 步或实盘 3 步  
4) 执行（干跑）：展示执行回执；落审计  
5) 回放：系统与审计页面可按 TraceID 重放全流程

## 4. 状态管理与错误边界
- 断线重连（指数退避）、请求取消与超时
- 错误边界：显示错误代码与排障链接
- 权限态：按钮/数据按 RBAC 隐藏或禁用

## 5. A11y 与性能
- AA 对比度；焦点可见；主流程支持键盘操作
- 首屏（内网）TTI ≤ 2.5s；交互 ≤ 100ms；图表 1 万点 60fps

## 6. 验收（DoD）
- 导航 3 次内可达任意功能；无“死路”
- 关键路径 100% 可演示（只读 + 干跑）  
- 提案卡片仅呈现**结构化 Proposal**；审批缺失时禁止执行  
- 审计回放可追溯每一步（含 TraceID）

[1] 参见《开发功能清单与开发顺序》M2/M3 UI 要求与关键路径【2】。
